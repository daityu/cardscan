<form id="uploadForm" enctype="multipart/form-data">
    <input type="file" name="file" required>
    <input type="submit" value="Upload">
</form>

<!-- アップロードされた画像がここに表示されます -->
<img id="uploadedImage" src="" alt="Uploaded Image will appear here." style="max-width: 500px;"/>

<script>
document.getElementById('uploadForm').addEventListener('submit', function(event) {
    event.preventDefault(); // デフォルトのフォーム送信を防止
    var file = this.file.files[0]; // 選択されたファイルを取得

    // ファイルが選択されていない場合は警告を表示
    if (!file) {
        alert("ファイルを選択してください！");
        return;
    }

    // アップロードするファイルの名前をURLに追加
    const url = 'https://182pvptd94.execute-api.ap-northeast-1.amazonaws.com/V1/' + encodeURIComponent(file.name);

    fetch(url, {
        method: 'PUT',
        body: file,
        headers: {
            'Content-Type': 'image/jpeg' // 送信するファイルの種類を指定
        }
    })
    .then(response => response.json()) // レスポンスをJSONとして解析
    .then(data => {
        // `<img>`タグの`src`属性をアップロード後のURLに設定
        // document.getElementById('uploadedImage').src = data.url;
    })
    .catch(error => console.error(error)); // エラーが発生した場合はコンソールに出力
});
</script>
